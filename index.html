<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BattleLegends 3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { margin:0; overflow:hidden; background:#111;}
  #hud {
    position:fixed; top:10px; left:10px; color:#0f0; font-family:Arial, sans-serif; z-index:10;
  }
  #crosshair {
    position:fixed; top:50%; left:50%; width:20px; height:20px; margin:-10px 0 0 -10px; pointer-events:none;
  }
  #crosshair::before,#crosshair::after{content:'';position:absolute;background:#fff;}
  #crosshair::before{left:9px; top:0; width:2px; height:20px;}
  #crosshair::after{top:9px; left:0; width:20px; height:2px;}
</style>
</head>
<body>
<div id="hud"><h2>ðŸ”¥ BattleLegends 3D</h2><p>WASD Move | Mouse Look | Click Shoot | AI Bots</p></div>
<div id="crosshair"></div>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/PointerLockControls.js"></script>

<script>
// Scene & Camera
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x222222);
scene.fog = new THREE.Fog(0x222222, 20, 150);
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 500);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

// Controls
const controls = new THREE.PointerLockControls(camera, document.body);
document.body.addEventListener('click',()=>controls.lock());
scene.add(controls.getObject());

// Lights
const hemi = new THREE.HemisphereLight(0xffffff,0x444444,0.6); scene.add(hemi);
const dir = new THREE.DirectionalLight(0xffffff,1); dir.position.set(10,20,10); dir.castShadow=true; scene.add(dir);

// Ground
const ground = new THREE.Mesh(new THREE.PlaneGeometry(300,300), new THREE.MeshStandardMaterial({color:0x333}));
ground.rotation.x=-Math.PI/2; ground.receiveShadow=true; scene.add(ground);

// Player
const player = new THREE.Mesh(new THREE.BoxGeometry(1,1.8,1), new THREE.MeshStandardMaterial({color:0x00ff00}));
player.position.y=0.9; scene.add(player);

// Weapon
const gun = new THREE.Mesh(new THREE.BoxGeometry(0.3,0.2,1), new THREE.MeshStandardMaterial({color:0x111}));
gun.position.set(0.3,-0.3,-1); camera.add(gun);

// AI Bots (simulated multiplayer)
const bots = [];
for(let i=0;i<5;i++){
  const bot = new THREE.Mesh(new THREE.BoxGeometry(1,1.8,1), new THREE.MeshStandardMaterial({color:0xff0000}));
  bot.position.set((Math.random()-0.5)*100,0.9,(Math.random()-0.5)*100);
  scene.add(bot);
  bots.push({mesh:bot,dir:new THREE.Vector3(Math.random()-0.5,0,Math.random()-0.5).normalize()});
}

// Movement
const keys = {}; document.addEventListener('keydown',e=>keys[e.code]=true);
document.addEventListener('keyup',e=>keys[e.code]=false);
const speed=6; const clock=new THREE.Clock();

// Shooting
document.addEventListener('mousedown',()=>{
  const bullet = new THREE.Mesh(new THREE.SphereGeometry(0.05,8,8), new THREE.MeshBasicMaterial({color:0xff0}));
  bullet.position.copy(camera.getWorldPosition(new THREE.Vector3())); scene.add(bullet);
  const dir = new THREE.Vector3(); camera.getWorldDirection(dir);
  function shoot(){ bullet.position.add(dir.clone().multiplyScalar(1.5)); if(bullet.position.length()<300){ requestAnimationFrame(shoot); }else scene.remove(bullet); } shoot();
});

// Animate
function animate(){
  requestAnimationFrame(animate);
  const delta = clock.getDelta();
  let vel = new THREE.Vector3();
  if(keys['KeyW']) vel.z -= speed*delta;
  if(keys['KeyS']) vel.z += speed*delta;
  if(keys['KeyA']) vel.x -= speed*delta;
  if(keys['KeyD']) vel.x += speed*delta;
  controls.moveRight(vel.x); controls.moveForward(vel.z);

  // Move AI Bots randomly
  bots.forEach(b=>{b.mesh.position.add(b.dir.clone().multiplyScalar(1.5*delta));
    if(Math.random()<0.01) b.dir.set(Math.random()-0.5,0,Math.random()-0.5).normalize();
  });

  camera.position.y = 1.6; // camera height
  renderer.render(scene,camera);
}
animate();

// Resize
window.addEventListener('resize',()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
